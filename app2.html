const { useState, useRef } = React;

const PronunciationApp = () => {
    const [currentSymbolIndex, setCurrentSymbolIndex] = useState(0);
    const [showDetails, setShowDetails] = useState(false);
    const [alwaysShowDetails, setAlwaysShowDetails] = useState(false);
    const [selectedCategory, setSelectedCategory] = useState('vowels');
    const symbolCardRef = useRef(null);

    const pronunciationData = {
        vowels: [
            {
                symbol: "ɪ",
                name: "Short I",
                description: "短い「イ」の音",
                category: "短母音",
                examples: ["it", "pick", "sit", "hit"],
                japaneseGuide: "軽く微笑む時の口の形で短い「イ」。日本語の「イ」より力を抜く。",
                detailedInstructions: {
                    tongue: "舌先は下の歯の裏に軽く触れ、舌の中央部分を少し高くする",
                    lips: "唇は軽く横に引くが、「イー」ほど強く引かない。自然な形を保つ",
                    jaw: "顎は軽く開き、日本語の「イ」より少し広い開口",
                    voice: "声帯を震わせて短く発音。長引かせないことが重要",
                    commonMistakes: ["日本語の「イ」のように長く伸ばしてしまう", "唇を横に引きすぎる"],
                    practice: "「イ」の口の形から少しリラックスした状態で短く「イ」"
                },
                difficulty: "easy",
                frequency: "英語で最も頻出する母音の一つ"
            },
            {
                symbol: "e",
                name: "Short E",
                description: "短い「エ」の音",
                category: "短母音",
                examples: ["pen", "head", "bed", "get"],
                japaneseGuide: "日本語の「え」より少し口を開ける。明確で開いた「エ」。",
                detailedInstructions: {
                    tongue: "舌先は下の歯の裏、舌の中央部分は平らで中間の高さ",
                    lips: "唇は自然な形で、横に引いたり丸めたりしない",
                    jaw: "顎は日本語の「エ」より少し大きく開く",
                    voice: "声帯を震わせてクリアに発音",
                    commonMistakes: ["日本語の「エ」と同じ口の開きで発音する"],
                    practice: "「ア」の口の開きで「エ」の音を出すイメージ"
                },
                difficulty: "easy",
                frequency: "英語で非常に頻出する母音"
            },
            {
                symbol: "æ",
                name: "Short A",
                description: "広い「ア」の音",
                category: "短母音",
                examples: ["cat", "apple", "man", "hat"],
                japaneseGuide: "口をしっかり開けて「あ」を発音し、「え」を長めにトッピング。驚いた時の「あっ！」の口。",
                detailedInstructions: {
                    tongue: "舌全体を下げて平らにし、舌先は下の歯の裏に位置",
                    lips: "唇は自然に開き、横にも縦にも引っ張らない",
                    jaw: "顎を大きく下に開く。日本語の「ア」より大きな開口",
                    voice: "のどの奥から響かせるように声帯を震わせる",
                    commonMistakes: ["日本語の「ア」のように発音する", "口の開きが小さすぎる"],
                    practice: "あくびをするときの口の開きで「ア」と「エ」の中間音"
                },
                difficulty: "medium",
                frequency: "英語で非常に頻出する母音"
            },
            {
                symbol: "ʌ",
                name: "Short U",
                description: "短い「ア」の音",
                category: "短母音",
                examples: ["cut", "uncle", "love", "but"],
                japaneseGuide: "喉の奥から短く「ア」。日本語の「ア」より奥で発音。",
                detailedInstructions: {
                    tongue: "舌の中央部分を少し後ろに引き、やや高めの位置に保つ",
                    lips: "唇は自然で中性的な形。特に丸めたり横に引いたりしない",
                    jaw: "顎は軽く開く程度。日本語の「ア」より開きを小さくする",
                    voice: "声帯を震わせて短めに発音。のどの奥から響かせる",
                    commonMistakes: ["日本語の「ア」のように口を大きく開ける", "「オ」の音になってしまう"],
                    practice: "「ア」の音を出そうとして、舌を少し後ろに引いた状態"
                },
                difficulty: "medium",
                frequency: "英語で頻出する母音"
            },
            {
                symbol: "ə",
                name: "Schwa",
                description: "曖昧母音「ア」",
                category: "短母音",
                examples: ["about", "sofa", "banana", "camera"],
                japaneseGuide: "疲れているときの息のような「あ」。最も中性的な母音。",
                detailedInstructions: {
                    tongue: "舌は完全にリラックスした中性位置。どこにも力を入れない",
                    lips: "唇も完全にリラックスして自然な形",
                    jaw: "顎は軽く開く。最小限の努力で",
                    voice: "声帯を軽く震わせて、最も自然で力の抜けた音",
                    commonMistakes: ["日本語の「ア」のように明確に発音する", "他の母音と区別しようとしすぎる"],
                    practice: "力を完全に抜いて、息を吐くときに軽く「ア」と言う"
                },
                difficulty: "easy",
                frequency: "英語で最も頻出する音"
            },
            {
                symbol: "iː",
                name: "Long EE",
                description: "長い「イー」の音",
                category: "長母音",
                examples: ["see", "eat", "feet", "piece"],
                japaneseGuide: "日本語の「イー」に近いが、もう少し緊張感のある音。",
                detailedInstructions: {
                    tongue: "舌を高く前方に位置させ、緊張を保つ",
                    lips: "唇を横に引き、緊張させる",
                    jaw: "顎はあまり開かない",
                    voice: "長く安定して発音",
                    commonMistakes: ["短く発音してしまう", "緊張感が不足"],
                    practice: "「イー」を長く伸ばし、口角を上げる感覚"
                },
                difficulty: "easy",
                frequency: "英語で頻出する長母音"
            },
            {
                symbol: "ɑː",
                name: "Long AH",
                description: "長い「アー」の音",
                category: "長母音",
                examples: ["father", "lot", "palm", "calm"],
                japaneseGuide: "口をしっかり開けて奥から「アー」。深くて開いた「ア」音。",
                detailedInstructions: {
                    tongue: "舌を低く平らにし、後ろに引く",
                    lips: "唇は自然に開き、丸めない",
                    jaw: "大きく開く",
                    voice: "のどの奥から響かせて長く発音",
                    commonMistakes: ["口の開きが小さい", "前方で発音してしまう"],
                    practice: "あくびをする時の口で深い「アー」"
                },
                difficulty: "easy",
                frequency: "英語で頻出する長母音"
            },
            {
                symbol: "ʊ",
                name: "Short OO",
                description: "短い「ウ」の音",
                category: "短母音",
                examples: ["put", "book", "good", "should"],
                japaneseGuide: "日本語の「ウ」に近いが、唇をもう少し丸める。",
                detailedInstructions: {
                    tongue: "舌を後ろに引き、高めの位置に保つ",
                    lips: "唇を軽く丸めるが、強く突き出さない",
                    jaw: "顎はあまり開かない",
                    voice: "短く発音し、緊張感を保つ",
                    commonMistakes: ["[uː]のように長く伸ばす", "日本語の「ウ」と同じに発音"],
                    practice: "「ウ」の形から力を少し抜いた短い音"
                },
                difficulty: "easy",
                frequency: "英語で頻出する母音"
            },
            {
                symbol: "ɒ",
                name: "Short O (British)",
                description: "短い「オ」の音（英）",
                category: "短母音",
                examples: ["hot", "dog", "got", "not"],
                japaneseGuide: "日本語の「オ」より口を大きく開いて発音。主にイギリス英語で使用。",
                detailedInstructions: {
                    tongue: "舌を下げて後ろに引く",
                    lips: "唇は丸めるが、日本語の「オ」ほど突き出さない",
                    jaw: "顎を大きく開く",
                    voice: "のどの奥から響かせる",
                    commonMistakes: ["アメリカ英語の[ɑː]と混同する"],
                    practice: "「ア」の開きで「オ」の音を作る感覚"
                },
                difficulty: "medium",
                frequency: "イギリス英語で頻出"
            },
            {
                symbol: "ɔː",
                name: "Long AW",
                description: "長い「オー」の音",
                category: "長母音",
                examples: ["saw", "law", "caught", "thought"],
                japaneseGuide: "日本語の「オー」より口を大きく開いて、唇を丸める。",
                detailedInstructions: {
                    tongue: "舌を低く後ろに引く",
                    lips: "唇を丸めて開く",
                    jaw: "適度に開く",
                    voice: "深く響かせて長く発音",
                    commonMistakes: ["日本語の「オ」と同じ発音", "浅い音になる"],
                    practice: "「ア」の開きで「オ」の唇の形"
                },
                difficulty: "medium",
                frequency: "英語で中程度の頻度"
            },
            {
                symbol: "ɜː",
                name: "NURSE vowel",
                description: "長い「アー」のR音",
                category: "長母音",
                examples: ["bird", "word", "heard", "nurse"],
                japaneseGuide: "長いあいまい母音と[r]を一緒に発音。舌を上に折り曲げた「アール」。",
                detailedInstructions: {
                    tongue: "舌先を上に巻き上げて、中央部を窪ませる",
                    lips: "軽く丸める",
                    jaw: "軽く開く",
                    voice: "R音の響きを保ちながら長く発音",
                    commonMistakes: ["日本語の「アー」で代用", "R音が弱すぎる"],
                    practice: "舌を巻いた状態で「アー」を長く発音"
                },
                difficulty: "hard",
                frequency: "英語で頻出する長母音"
            },
            {
                symbol: "uː",
                name: "Long OO",
                description: "長い「ウー」の音",
                category: "長母音",
                examples: ["pool", "supermarket", "moon", "blue"],
                japaneseGuide: "日本語の「ウー」に近いが、唇をもっと丸くして前に突き出す。",
                detailedInstructions: {
                    tongue: "舌を高く後ろに引く",
                    lips: "唇を強く丸めて前に突き出す",
                    jaw: "あまり開かない",
                    voice: "長く安定して発音",
                    commonMistakes: ["唇の丸めが不十分", "短く発音してしまう"],
                    practice: "キスをする時の唇の形で「ウー」"
                },
                difficulty: "easy",
                frequency: "英語で頻出する長母音"
            },
        ],
        consonants: [
            {
                symbol: "p",
                name: "P sound",
                description: "無声両唇破裂音",
                category: "破裂音",
                examples: ["pin", "cup", "happy", "stop"],
                japaneseGuide: "プッ。日本語の「パ」の子音部分。息を強く出して発音。",
                detailedInstructions: {
                    tongue: "舌は自然な位置でリラックス",
                    lips: "両唇をしっかり閉じてから破裂させる",
                    jaw: "自然な位置",
                    voice: "声帯は震わせず、息だけで破裂音を作る",
                    commonMistakes: ["声を出してしまう", "破裂が弱い"],
                    practice: "両唇を閉じて息を溜めてから「プッ」と破裂"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "b",
                name: "B sound",
                description: "有声両唇破裂音",
                category: "破裂音",
                examples: ["bus", "cab", "baby", "symbol"],
                japaneseGuide: "ブッ。日本語の「バ」の子音部分。声帯を震わせて発音。",
                detailedInstructions: {
                    tongue: "舌は自然な位置でリラックス",
                    lips: "両唇をしっかり閉じてから破裂させる",
                    jaw: "自然な位置",
                    voice: "声帯を震わせながら破裂音を作る",
                    commonMistakes: ["声が弱すぎる", "pとの区別ができない"],
                    practice: "のどに手を当てて振動を確認しながら「ブッ」"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "θ",
                name: "Voiceless TH",
                description: "無声歯間摩擦音",
                category: "摩擦音",
                examples: ["think", "thin", "mouth", "tooth"],
                japaneseGuide: "スーーーー（舌をかむ）。舌先を歯の間に軽く挟み、息だけを出して「ス」のような音。",
                detailedInstructions: {
                    tongue: "舌先を上下の歯の間に軽く挟む。舌は平らにして歯に触れる程度",
                    lips: "唇は自然な形で、舌が見えるように少し開く",
                    jaw: "顎は軽く開き、舌を出すのに十分なスペースを作る",
                    voice: "声帯は震わせず、息だけを舌の両側から出す",
                    commonMistakes: ["「サ」や「ス」で代用する", "舌を歯に強く押し付ける", "声を出してしまう"],
                    practice: "舌先を軽く歯で挟んで「ス」の息だけを出す練習"
                },
                difficulty: "hard",
                frequency: "英語で中程度の頻度"
            },
            {
                symbol: "ð",
                name: "Voiced TH",
                description: "有声歯間摩擦音",
                category: "摩擦音",
                examples: ["this", "that", "mother", "breathe"],
                japaneseGuide: "ズーーーー（舌をかむ）。舌先を歯の間に軽く挟み、声帯を震わせながら「ズ」のような音。",
                detailedInstructions: {
                    tongue: "舌先を上下の歯の間に軽く挟む。θと同じ舌の位置",
                    lips: "唇は自然な形で、舌が見えるように少し開く",
                    jaw: "顎は軽く開き、舌を出すのに十分なスペースを作る",
                    voice: "声帯を震わせながら、息を舌の両側から出す",
                    commonMistakes: ["「ザ」や「ズ」で代用する", "息だけで発音してしまう"],
                    practice: "θの形から声帯を震わせて「ズズズ」のような音"
                },
                difficulty: "hard",
                frequency: "英語で中程度の頻度"
            },
            {
                symbol: "s",
                name: "S sound",
                description: "無声歯茎摩擦音",
                category: "摩擦音",
                examples: ["see", "cent", "bus", "kiss"],
                japaneseGuide: "スーーーー。日本語の「サ」の子音部分。舌先を歯茎に近づけて息を出す。",
                detailedInstructions: {
                    tongue: "舌先を上の歯茎に近づける（触れない）",
                    lips: "自然な形",
                    jaw: "軽く開く",
                    voice: "声帯は震わせず、息だけを流す",
                    commonMistakes: ["舌先が歯茎に触れてしまう", "息の流れが弱い"],
                    practice: "舌先と歯茎の間から「スー」と息を流す"
                },
                difficulty: "easy",
                frequency: "英語で最も頻出する子音の一つ"
            },
            {
                symbol: "z",
                name: "Z sound",
                description: "有声歯茎摩擦音",
                category: "摩擦音",
                examples: ["zoo", "easy", "buzz", "rose"],
                japaneseGuide: "ズーーーー。日本語の「ザ」の子音部分。舌先を歯茎に近づけて声帯を震わせる。",
                detailedInstructions: {
                    tongue: "舌先を上の歯茎に近づける（触れない）",
                    lips: "自然な形",
                    jaw: "軽く開く",
                    voice: "声帯を震わせながら息を流す",
                    commonMistakes: ["sとの区別ができない", "声が弱すぎる"],
                    practice: "のどの振動を確認しながら「ズー」"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "r",
                name: "R sound",
                description: "有声歯茎接近音",
                category: "流音",
                examples: ["rice", "car", "very", "tree"],
                japaneseGuide: "舌を上に折り曲げた暗い「ルーーー」。舌先を上に巻き上げるか、舌全体を後ろに引いて「ア」のような音。",
                detailedInstructions: {
                    tongue: "舌先を上に巻き上げて口蓋に近づける（巻き舌）、または舌全体を後ろに引く",
                    lips: "唇は軽く丸めて前に突き出す",
                    jaw: "顎は軽く開く",
                    voice: "声帯を震わせて、のどの奥から響く音を出す",
                    commonMistakes: ["日本語の「ラ」のように舌先を弾く", "舌の動きが不十分"],
                    practice: "「ウアー」の音から始めて、徐々に舌を後ろに引く練習"
                },
                difficulty: "hard",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "t",
                name: "T sound",
                description: "無声歯茎破裂音",
                category: "破裂音",
                examples: ["tea", "cat", "water", "sit"],
                japaneseGuide: "トゥッ。日本語の「タ」の子音部分だが、舌先を歯茎につける。",
                detailedInstructions: {
                    tongue: "舌先を上の歯茎にしっかり押し付ける",
                    lips: "自然な形",
                    jaw: "軽く開く",
                    voice: "声帯は震わせず、息だけで破裂",
                    commonMistakes: ["日本語の「タ」のように発音", "舌の位置が間違い"],
                    practice: "舌先を歯茎に付けて「トゥッ」と破裂"
                },
                difficulty: "easy",
                frequency: "英語で最も頻出する子音の一つ"
            },
            {
                symbol: "d",
                name: "D sound",
                description: "有声歯茎破裂音",
                category: "破裂音",
                examples: ["dog", "bad", "middle", "red"],
                japaneseGuide: "ドゥッ。日本語の「ダ」の子音部分だが、舌先を歯茎につけて声帯を震わせる。",
                detailedInstructions: {
                    tongue: "舌先を上の歯茎にしっかり押し付ける",
                    lips: "自然な形",
                    jaw: "軽く開く",
                    voice: "声帯を震わせながら破裂",
                    commonMistakes: ["tとの区別ができない", "声が弱すぎる"],
                    practice: "のどの振動を確認しながら「ドゥッ」"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "k",
                name: "K sound",
                description: "無声軟口蓋破裂音",
                category: "破裂音",
                examples: ["cat", "back", "school", "make"],
                japaneseGuide: "クッ。日本語の「カ」の子音部分。舌の奥を軟口蓋につける。",
                detailedInstructions: {
                    tongue: "舌の奥を軟口蓋（上あごの奥）に押し付ける",
                    lips: "自然な形",
                    jaw: "適度に開く",
                    voice: "声帯は震わせず、息だけで破裂",
                    commonMistakes: ["舌の位置が前すぎる", "破裂が弱い"],
                    practice: "舌の奥で息を止めて「クッ」と破裂"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "g",
                name: "G sound",
                description: "有声軟口蓋破裂音",
                category: "破裂音",
                examples: ["go", "big", "agree", "dog"],
                japaneseGuide: "グッ。日本語の「ガ」の子音部分。舌の奥を軟口蓋につけて声帯を震わせる。",
                detailedInstructions: {
                    tongue: "舌の奥を軟口蓋（上あごの奥）に押し付ける",
                    lips: "自然な形",
                    jaw: "適度に開く",
                    voice: "声帯を震わせながら破裂",
                    commonMistakes: ["kとの区別ができない", "声が弱すぎる"],
                    practice: "のどの振動を確認しながら「グッ」"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "f",
                name: "F sound",
                description: "無声唇歯摩擦音",
                category: "摩擦音",
                examples: ["fish", "off", "phone", "laugh"],
                japaneseGuide: "フーーーー。下唇を上の歯に軽く触れさせ、息を出して「フ」の音。",
                detailedInstructions: {
                    tongue: "舌は自然な位置でリラックス",
                    lips: "下唇を軽く上の前歯に触れさせる",
                    jaw: "自然な位置",
                    voice: "声帯は震わせず、息だけを流す",
                    commonMistakes: ["日本語の「フ」で代用", "下唇と歯の接触が弱い"],
                    practice: "下唇を歯に触れて「フーー」と息を流す"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "v",
                name: "V sound",
                description: "有声唇歯摩擦音",
                category: "摩擦音",
                examples: ["very", "have", "love", "over"],
                japaneseGuide: "ヴーーーー。下唇を上の歯に軽く触れさせ、声帯を震わせながら「ヴ」の音。",
                detailedInstructions: {
                    tongue: "舌は自然な位置でリラックス。特に動かす必要はない",
                    lips: "下唇を軽く上の前歯に触れさせる。強く押し付けない",
                    jaw: "顎は自然な位置",
                    voice: "声帯を震わせながら息を下唇と上の歯の間から出す",
                    commonMistakes: ["「バ」や「ブ」で代用する", "下唇を歯に強く押し付ける", "上唇も一緒に動かしてしまう"],
                    practice: "下唇だけを軽く上の歯に触れて「ヴー」と声を出す"
                },
                difficulty: "medium",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "ʃ",
                name: "SH sound",
                description: "無声後歯茎摩擦音",
                category: "摩擦音",
                examples: ["she", "wash", "nation", "fish"],
                japaneseGuide: "シューーーー。日本語の「シャ」の子音部分。舌を少し後ろに引いて「シュ」。",
                detailedInstructions: {
                    tongue: "舌先を歯茎よりやや後ろに向ける",
                    lips: "軽く丸める",
                    jaw: "軽く開く",
                    voice: "声帯は震わせず、息だけを流す",
                    commonMistakes: ["sと同じ舌の位置で発音", "唇の丸めが不十分"],
                    practice: "舌を少し後ろに引いて唇を丸めて「シュー」"
                },
                difficulty: "medium",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "ʒ",
                name: "ZH sound",
                description: "有声後歯茎摩擦音",
                category: "摩擦音",
                examples: ["measure", "vision", "casual", "genre"],
                japaneseGuide: "ジューーーー。日本語の「ジャ」の子音部分。舌を少し後ろに引いて声帯を震わせる。",
                detailedInstructions: {
                    tongue: "舌先を歯茎よりやや後ろに向ける",
                    lips: "軽く丸める",
                    jaw: "軽く開く",
                    voice: "声帯を震わせながら息を流す",
                    commonMistakes: ["ʃとの区別ができない", "日本語の「ジャ」と同じ発音"],
                    practice: "ʃの形から声帯を震わせて「ジュー」"
                },
                difficulty: "hard",
                frequency: "英語で低頻度の子音"
            },
            {
                symbol: "h",
                name: "H sound",
                description: "無声声門摩擦音",
                category: "摩擦音",
                examples: ["hat", "house", "hello", "who"],
                japaneseGuide: "ハーーーーー。日本語の「ハ」の子音部分。息だけを出す軽い音。",
                detailedInstructions: {
                    tongue: "舌は自然な位置でリラックス",
                    lips: "次の母音の形に準備",
                    jaw: "次の母音に応じて調整",
                    voice: "声帯は震わせず、軽く息を出す",
                    commonMistakes: ["強く発音しすぎる", "日本語の「ハ」と同じ強さ"],
                    practice: "軽く息を吐くだけの感覚で「ハー」"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "tʃ",
                name: "CH sound",
                description: "無声後歯茎破擦音",
                category: "破擦音",
                examples: ["chair", "much", "teach", "cheese"],
                japaneseGuide: "チュ。日本語の「チャ」の子音部分。「t」と「ʃ」を素早く連続で発音。",
                detailedInstructions: {
                    tongue: "最初は歯茎に付けてから後ろに移動",
                    lips: "軽く丸める",
                    jaw: "軽く開く",
                    voice: "声帯は震わせず、破裂から摩擦へ",
                    commonMistakes: ["2つの音を分離して発音", "日本語の「チャ」と同じ"],
                    practice: "「トゥ」から素早く「シュ」へ移行"
                },
                difficulty: "medium",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "dʒ",
                name: "J sound",
                description: "有声後歯茎破擦音",
                category: "破擦音",
                examples: ["judge", "age", "bridge", "general"],
                japaneseGuide: "ジュッ。日本語の「ジャ」の子音部分。「d」と「ʒ」を素早く連続で発音。",
                detailedInstructions: {
                    tongue: "最初は歯茎に付けてから後ろに移動",
                    lips: "軽く丸める",
                    jaw: "軽く開く",
                    voice: "声帯を震わせながら破裂から摩擦へ",
                    commonMistakes: ["tʃとの区別ができない", "2つの音を分離"],
                    practice: "「ドゥ」から素早く「ジュ」へ移行"
                },
                difficulty: "medium",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "m",
                name: "M sound",
                description: "有声両唇鼻音",
                category: "鼻音",
                examples: ["man", "come", "summer", "time"],
                japaneseGuide: "ムーーーー。日本語の「マ」の子音部分。唇を閉じて鼻から音を出す。",
                detailedInstructions: {
                    tongue: "舌は自然な位置でリラックス",
                    lips: "両唇をしっかり閉じる",
                    jaw: "自然な位置",
                    voice: "声帯を震わせて鼻から音を出す",
                    commonMistakes: ["口から音が漏れる", "唇の閉じが弱い"],
                    practice: "唇を閉じて「ムー」と鼻から音を出す"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "n",
                name: "N sound",
                description: "有声歯茎鼻音",
                category: "鼻音",
                examples: ["no", "run", "under", "night"],
                japaneseGuide: "ヌーーーー。日本語の「ナ」の子音部分。舌先を歯茎につけて鼻から音を出す。",
                detailedInstructions: {
                    tongue: "舌先を上の歯茎にしっかり付ける",
                    lips: "自然な形",
                    jaw: "軽く開く",
                    voice: "声帯を震わせて鼻から音を出す",
                    commonMistakes: ["舌の位置が間違い", "口から音が漏れる"],
                    practice: "舌先を歯茎に付けて「ヌー」と鼻から"
                },
                difficulty: "easy",
                frequency: "英語で最も頻出する子音の一つ"
            },
            {
                symbol: "ŋ",
                name: "NG sound",
                description: "有声軟口蓋鼻音",
                category: "鼻音",
                examples: ["sing", "long", "think", "finger"],
                japaneseGuide: "ンガーーーー？日本語にない音。舌の奥を軟口蓋につけて鼻から「ング」。",
                detailedInstructions: {
                    tongue: "舌の奥を軟口蓋（上あごの奥）に付ける",
                    lips: "自然な形",
                    jaw: "適度に開く",
                    voice: "声帯を震わせて鼻から音を出す",
                    commonMistakes: ["「ン」+「グ」と分離して発音", "舌の位置が前すぎる"],
                    practice: "舌の奥で息を止めて鼻から「ング」"
                },
                difficulty: "medium",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "w",
                name: "W sound",
                description: "有声両唇軟口蓋接近音",
                category: "接近音",
                examples: ["we", "water", "away", "sweet"],
                japaneseGuide: "唇をすぼめて「ウゥ」。唇を丸めて「ウ」の形から次の母音へ素早く移動。",
                detailedInstructions: {
                    tongue: "舌の奥を軽く上げる",
                    lips: "唇を強く丸めて前に突き出す",
                    jaw: "あまり開かない",
                    voice: "声帯を震わせながら次の音へ滑らかに移行",
                    commonMistakes: ["日本語の「ワ」と同じ発音", "唇の丸めが不十分"],
                    practice: "キスする時の唇で「ウ」から次の音へ"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
            {
                symbol: "j",
                name: "Y sound",
                description: "有声硬口蓋接近音",
                category: "接近音",
                examples: ["yes", "you", "beyond", "new"],
                japaneseGuide: "「や、ゆ、よ」。日本語の「ヤ」の子音部分。舌を硬口蓋に近づけて「イ」から次の音へ。",
                detailedInstructions: {
                    tongue: "舌を硬口蓋（上あごの前部）に近づける",
                    lips: "軽く横に引く",
                    jaw: "あまり開かない",
                    voice: "声帯を震わせながら次の音へ移行",
                    commonMistakes: ["強く発音しすぎる", "日本語の「ヤ」と同じ"],
                    practice: "軽い「イ」から次の母音へ素早く移行"
                },
                difficulty: "easy",
                frequency: "英語で頻出する子音"
            },
        ],
        diphthongs: [
            {
                symbol: "eɪ",
                name: "FACE vowel",
                description: "「エイ」二重母音",
                category: "二重母音",
                examples: ["eight", "pay", "face", "say"],
                japaneseGuide: "ボールを「エ〜イ」と投げる感じ。「エ」から「イ」へ滑らかに移動。",
                detailedInstructions: {
                    tongue: "「エ」の位置から「イ」の位置へ滑らかに移動",
                    lips: "最初は自然、後半で軽く横に引く",
                    jaw: "「エ」で開いてから「イ」で閉じる",
                    voice: "最初の音を強く、後半は軽く",
                    commonMistakes: ["2つの音を分離して発音", "後半の「イ」が強すぎる"],
                    practice: "「エー」から徐々に「イ」に向かって滑らせる"
                },
                difficulty: "medium",
                frequency: "英語で高頻度の二重母音"
            },
            {
                symbol: "aɪ",
                name: "PRICE vowel",
                description: "「アイ」二重母音",
                category: "二重母音",
                examples: ["I", "pie", "my", "time"],
                japaneseGuide: "童謡の冒頭に出てくるような「ア〜イ」。「ア」から「イ」へ明確に移動。",
                detailedInstructions: {
                    tongue: "低い「ア」の位置から高い「イ」の位置へ",
                    lips: "開いた状態から横に引く",
                    jaw: "大きく開いてから閉じる",
                    voice: "両方の音を明確に発音",
                    commonMistakes: ["日本語の「アイ」と同じ発音", "最初の「ア」が浅すぎる"],
                    practice: "深い「アー」から明確に「イ」へ移動"
                },
                difficulty: "medium",
                frequency: "英語で高頻度の二重母音"
            },
            {
                symbol: "ɔɪ",
                name: "CHOICE vowel",
                description: "「オイ」二重母音",
                category: "二重母音",
                examples: ["toy", "noise", "boy", "voice"],
                japaneseGuide: "お〜いと呼びかける感じ。「オ」から「イ」へ移動。",
                detailedInstructions: {
                    tongue: "後ろの「オ」から前の「イ」へ移動",
                    lips: "丸い形から横に引く",
                    jaw: "適度に開いた状態から閉じる",
                    voice: "両方の音を明確に",
                    commonMistakes: ["日本語の「オイ」と同じ発音"],
                    practice: "深い「オ」から明確に「イ」へ"
                },
                difficulty: "easy",
                frequency: "英語で中程度の頻度"
            },
            {
                symbol: "aʊ",
                name: "MOUTH vowel",
                description: "「アウ」二重母音",
                category: "二重母音",
                examples: ["mouth", "town", "now", "cow"],
                japaneseGuide: "足の小指をぶつけて「あう」。「ア」から「ウ」へ移動。",
                detailedInstructions: {
                    tongue: "低い「ア」から高い後ろの位置へ",
                    lips: "開いた状態から丸める",
                    jaw: "大きく開いてから閉じる",
                    voice: "両方の音を明確に",
                    commonMistakes: ["日本語の「アウ」と同じ発音", "最初の「ア」が浅すぎる"],
                    practice: "深い「ア」から唇を丸めて「ウ」へ"
                },
                difficulty: "medium",
                frequency: "英語で頻出する二重母音"
            },
            {
                symbol: "oʊ",
                name: "GOAT vowel",
                description: "「オウ」二重母音",
                category: "二重母音",
                examples: ["know", "soul", "go", "home"],
                japaneseGuide: "アメリカ英語の「オ」から「ウ」への移動。「オ」から「ウ」へ。",
                detailedInstructions: {
                    tongue: "中間の位置から後ろの高い位置へ",
                    lips: "軽く丸めた状態からより丸める",
                    jaw: "適度に開いた状態から閉じる",
                    voice: "滑らかな移行",
                    commonMistakes: ["イギリス英語の[əʊ]と混同"],
                    practice: "「オ」から徐々に「ウ」へ移行"
                },
                difficulty: "medium",
                frequency: "アメリカ英語で頻出"
            },
            {
                symbol: "ɪə",
                name: "NEAR vowel",
                description: "「イア」二重母音",
                category: "二重母音",
                examples: ["ear", "here", "near", "beer"],
                japaneseGuide: "お風呂に入って気持ち「イ〜ァ」。「イ」から曖昧な「ア」へ。",
                detailedInstructions: {
                    tongue: "高い「イ」から中性の位置へ",
                    lips: "横に引いた状態から自然な形へ",
                    jaw: "閉じた状態から軽く開く",
                    voice: "最初ははっきり、後半は曖昧に",
                    commonMistakes: ["後半を明確な「ア」で発音"],
                    practice: "「イー」から力を抜いて曖昧な「ア」へ"
                },
                difficulty: "hard",
                frequency: "イギリス英語で中程度の頻度"
            },
            {
                symbol: "eə",
                name: "SQUARE vowel",
                description: "「エア」二重母音",
                category: "二重母音",
                examples: ["air", "fair", "care", "where"],
                japaneseGuide: "ストレッチしながら「エーァ」。「エ」から曖昧な「ア」へ移動。",
                detailedInstructions: {
                    tongue: "中間の「エ」から中性の位置へ",
                    lips: "自然な形を保つ",
                    jaw: "適度に開いた状態を維持",
                    voice: "最初ははっきり、後半は曖昧に",
                    commonMistakes: ["後半を明確な「ア」で発音"],
                    practice: "「エー」から力を抜いて曖昧に"
                },
                difficulty: "hard",
                frequency: "イギリス英語で中程度の頻度"
            },
            {
                symbol: "ʊə",
                name: "CURE vowel",
                description: "「ウア」二重母音",
                category: "二重母音",
                examples: ["sure", "poor", "cure", "tour"],
                japaneseGuide: "飲み物をこぼして「う〜ぁ」。「ウ」から曖昧な「ア」へ。",
                detailedInstructions: {
                    tongue: "後ろの高い位置から中性へ",
                    lips: "丸めた形から自然な形へ",
                    jaw: "閉じた状態から軽く開く",
                    voice: "最初ははっきり、後半は曖昧に",
                    commonMistakes: ["現代英語では使用頻度が低下"],
                    practice: "「ウー」から力を抜いて曖昧な「ア」へ"
                },
                difficulty: "hard",
                frequency: "現代英語で低頻度"
            }
        ]
    };

    const allSymbols = [...pronunciationData.vowels, ...pronunciationData.consonants, ...pronunciationData.diphthongs];

    const getCurrentData = () => {
        switch(selectedCategory) {
            case 'vowels': return pronunciationData.vowels;
            case 'consonants': return pronunciationData.consonants;
            case 'diphthongs': return pronunciationData.diphthongs;
            case 'all': return allSymbols;
            default: return pronunciationData.vowels;
        }
    };

    const currentData = getCurrentData();
    const currentSymbol = currentData[currentSymbolIndex] || currentData[0];

    const speakExample = (text) => {
        if ('speechSynthesis' in window) {
            speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.6;
            speechSynthesis.speak(utterance);
        }
    };

    const nextSymbol = () => {
        setCurrentSymbolIndex((prev) => (prev + 1) % currentData.length);
    };

    const prevSymbol = () => {
        setCurrentSymbolIndex((prev) => (prev - 1 + currentData.length) % currentData.length);
    };

    const shuffleSymbol = () => {
        const randomIndex = Math.floor(Math.random() * currentData.length);
        setCurrentSymbolIndex(randomIndex);
    };

    const shuffleSymbolWithScroll = () => {
        shuffleSymbol();
        setTimeout(() => {
            if (symbolCardRef.current) {
                symbolCardRef.current.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }, 100);
    };

    // スクロール機能付きナビゲーション関数
    const nextSymbolWithScroll = () => {
        nextSymbol();
        // 少し遅延させてからスクロール（状態更新後）
        setTimeout(() => {
            if (symbolCardRef.current) {
                symbolCardRef.current.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }, 100);
    };

    const prevSymbolWithScroll = () => {
        prevSymbol();
        setTimeout(() => {
            if (symbolCardRef.current) {
                symbolCardRef.current.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }, 100);
    };

    const getDifficultyColor = (difficulty) => {
        switch(difficulty) {
            case 'easy': return 'bg-green-100 text-green-700';
            case 'medium': return 'bg-orange-100 text-orange-700';
            case 'hard': return 'bg-red-100 text-red-700';
            default: return 'bg-gray-100 text-gray-700';
        }
    };

    return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-4">
            <div className="max-w-4xl mx-auto">
                
                {/* Header */}
                <div className="text-center mb-8">
                    <div className="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl mb-4 shadow-lg">
                        <span className="text-2xl text-white font-bold">IPA</span>
                    </div>
                    <h1 className="text-4xl font-bold text-gray-900 mb-2">発音記号マスター</h1>
                    <p className="text-lg text-gray-600">44個の発音記号で美しい発音を身につけよう</p>
                </div>

                {/* Category Pills */}
                <div className="flex justify-center gap-3 mb-6 flex-wrap">
                    {[
                        { key: 'vowels', label: '母音', count: pronunciationData.vowels.length, emoji: '🔤' },
                        { key: 'consonants', label: '子音', count: pronunciationData.consonants.length, emoji: '🎯' },
                        { key: 'diphthongs', label: '二重母音', count: pronunciationData.diphthongs.length, emoji: '🌊' },
                        { key: 'all', label: '全て', count: allSymbols.length, emoji: '📚' }
                    ].map(({ key, label, count, emoji }) => (
                        <button
                            key={key}
                            onClick={() => {
                                setSelectedCategory(key);
                                setCurrentSymbolIndex(0);
                            }}
                            className={`px-5 py-3 rounded-2xl text-sm font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 ${
                                selectedCategory === key 
                                    ? 'bg-gradient-to-r from-blue-500 to-indigo-600 text-white' 
                                    : 'bg-white text-gray-700 hover:bg-gray-50'
                            }`}
                        >
                            <span className="mr-2">{emoji}</span>
                            {label} ({count})
                        </button>
                    ))}
                </div>

                {/* Always Show Details Toggle */}
                <div className="flex justify-center mb-6">
                    <button
                        onClick={() => {
                            const newValue = !alwaysShowDetails;
                            setAlwaysShowDetails(newValue);
                            if (newValue) {
                                setShowDetails(true);
                            }
                        }}
                        className={`px-6 py-3 rounded-2xl text-sm font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 ${
                            alwaysShowDetails
                                ? 'bg-gradient-to-r from-purple-500 to-pink-600 text-white' 
                                : 'bg-white text-purple-700 hover:bg-purple-50 border-2 border-purple-200'
                        }`}
                    >
                        <span className="mr-2">{alwaysShowDetails ? '🔓' : '🔒'}</span>
                        {alwaysShowDetails ? '詳細表示：常にON' : '詳細表示：切り替え式'}
                    </button>
                </div>

                {/* Navigation */}
                <div className="flex justify-between items-center mb-6">
                    <div className="text-sm text-gray-500">
                        {currentSymbolIndex + 1} / {currentData.length}
                    </div>
                    
                    <div className="flex gap-2">
                        <button
                            onClick={shuffleSymbol}
                            className="bg-white text-green-600 p-2 rounded-xl shadow-md hover:shadow-lg transition-all duration-200"
                            title="ランダム"
                        >
                            🎲
                        </button>
                        <button
                            onClick={prevSymbol}
                            className="bg-white text-gray-700 p-2 rounded-xl shadow-md hover:shadow-lg transition-all duration-200"
                            title="前へ"
                        >
                            ←
                        </button>
                        <button
                            onClick={nextSymbol}
                            className="bg-blue-500 text-white p-2 rounded-xl shadow-md hover:shadow-lg transition-all duration-200"
                            title="次へ"
                        >
                            →
                        </button>
                    </div>
                </div>

                {/* Main Card */}
                <div ref={symbolCardRef} className="bg-white rounded-3xl shadow-2xl overflow-hidden">
                    
                    {/* Symbol Display */}
                    <div className="bg-gradient-to-br from-blue-50 to-indigo-50 p-12 text-center relative">
                        <div className="absolute top-6 right-6">
                            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getDifficultyColor(currentSymbol.difficulty)}`}>
                                {currentSymbol.difficulty === 'easy' && '🟢 簡単'}
                                {currentSymbol.difficulty === 'medium' && '🟡 普通'}
                                {currentSymbol.difficulty === 'hard' && '🔴 難しい'}
                            </span>
                        </div>
                        
                        <div className="text-8xl font-mono text-blue-600 mb-4">
                            /{currentSymbol.symbol}/
                        </div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-2">{currentSymbol.name}</h2>
                        <p className="text-lg text-gray-600 mb-4">{currentSymbol.description}</p>
                        <div className="flex justify-center gap-4 text-sm text-gray-500">
                            <span>📊 {currentSymbol.category}</span>
                            <span>🔄 {currentSymbol.frequency}</span>
                        </div>
                    </div>

                    {/* Content */}
                    <div className="p-8">
                        
                        {/* Examples */}
                        <div className="mb-8">
                            <h3 className="text-xl font-bold text-gray-800 mb-4">📝 例文</h3>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                                {currentSymbol.examples && currentSymbol.examples.map((example, index) => (
                                    <button
                                        key={index}
                                        onClick={() => speakExample(example)}
                                        className="p-4 bg-gray-50 hover:bg-gray-100 rounded-2xl transition-all duration-200 flex items-center gap-3 border hover:border-gray-200 hover:shadow-md"
                                    >
                                        <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                            🔊
                                        </div>
                                        <span className="font-medium text-gray-700">{example}</span>
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* Japanese Guide */}
                        <div className="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 mb-6">
                            <h4 className="text-blue-800 font-bold mb-3 text-lg">🇯🇵 日本語ガイド</h4>
                            <p className="text-blue-700 leading-relaxed">{currentSymbol.japaneseGuide}</p>
                        </div>

                        {/* Details Toggle */}
                        {!alwaysShowDetails && !showDetails && (
                            <div className="text-center mb-6">
                                <button
                                    onClick={() => setShowDetails(true)}
                                    className="inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-semibold px-6 py-3 rounded-2xl hover:bg-blue-50 transition-all duration-200"
                                >
                                    ℹ️ 詳細情報を表示
                                </button>
                            </div>
                        )}
                        
                        {!alwaysShowDetails && showDetails && (
                            <div className="text-center mb-6">
                                <button
                                    onClick={() => setShowDetails(false)}
                                    className="inline-flex items-center gap-2 text-gray-600 hover:text-gray-700 font-semibold px-6 py-3 rounded-2xl hover:bg-gray-50 transition-all duration-200"
                                >
                                    🔽 詳細を隠す
                                </button>
                            </div>
                        )}
                        
                        {alwaysShowDetails && (
                            <div className="text-center mb-6">
                                <div className="text-purple-600 font-semibold flex items-center justify-center gap-2">
                                    <span>🔓</span>
                                    <span>詳細情報は常に表示されています</span>
                                </div>
                            </div>
                        )}

                        {/* Advanced Details */}
                        {(alwaysShowDetails || showDetails) && (
                            <div className="space-y-6 mb-6">
                                {/* Detailed Instructions */}
                                {currentSymbol.detailedInstructions && (
                                    <div className="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-6 border border-indigo-200">
                                        <h4 className="text-indigo-800 font-bold mb-4 text-lg flex items-center gap-2">
                                            🎯 詳細な発音方法
                                        </h4>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div className="space-y-4">
                                                <div className="bg-white rounded-xl p-4 border border-indigo-100">
                                                    <h5 className="font-semibold text-indigo-700 mb-2 flex items-center gap-2">
                                                        👅 舌の位置・動き
                                                    </h5>
                                                    <p className="text-gray-700 text-sm">{currentSymbol.detailedInstructions.tongue}</p>
                                                </div>
                                                
                                                <div className="bg-white rounded-xl p-4 border border-indigo-100">
                                                    <h5 className="font-semibold text-indigo-700 mb-2 flex items-center gap-2">
                                                        👄 唇の形
                                                    </h5>
                                                    <p className="text-gray-700 text-sm">{currentSymbol.detailedInstructions.lips}</p>
                                                </div>
                                            </div>
                                            
                                            <div className="space-y-4">
                                                <div className="bg-white rounded-xl p-4 border border-indigo-100">
                                                    <h5 className="font-semibold text-indigo-700 mb-2 flex items-center gap-2">
                                                        🦴 顎の開き
                                                    </h5>
                                                    <p className="text-gray-700 text-sm">{currentSymbol.detailedInstructions.jaw}</p>
                                                </div>
                                                
                                                <div className="bg-white rounded-xl p-4 border border-indigo-100">
                                                    <h5 className="font-semibold text-indigo-700 mb-2 flex items-center gap-2">
                                                        🎵 声帯・息
                                                    </h5>
                                                    <p className="text-gray-700 text-sm">{currentSymbol.detailedInstructions.voice}</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Practice Tips */}
                                        <div className="mt-6 bg-white rounded-xl p-4 border border-indigo-100">
                                            <h5 className="font-semibold text-indigo-700 mb-2 flex items-center gap-2">
                                                💡 練習のコツ
                                            </h5>
                                            <p className="text-gray-700 text-sm">{currentSymbol.detailedInstructions.practice}</p>
                                        </div>
                                        
                                        {/* Common Mistakes */}
                                        {currentSymbol.detailedInstructions.commonMistakes && (
                                            <div className="mt-4 bg-red-50 rounded-xl p-4 border border-red-100">
                                                <h5 className="font-semibold text-red-700 mb-2 flex items-center gap-2">
                                                    ⚠️ よくある間違い
                                                </h5>
                                                <ul className="text-red-600 text-sm space-y-1">
                                                    {currentSymbol.detailedInstructions.commonMistakes.map((mistake, index) => (
                                                        <li key={index}>• {mistake}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        )}

                        {/* Practice Section */}
                        <div className="mt-8 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200">
                            <h4 className="text-green-800 font-bold mb-4 text-lg">🎯 練習方法</h4>
                            <div className="grid md:grid-cols-3 gap-4">
                                <button
                                    onClick={() => {
                                        currentSymbol.examples && currentSymbol.examples.forEach((example, index) => {
                                            setTimeout(() => speakExample(example), index * 1500);
                                        });
                                    }}
                                    className="bg-white p-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 text-center border border-green-200"
                                >
                                    <div className="text-2xl mb-2">🔁</div>
                                    <div className="font-semibold text-green-700">全例文を連続再生</div>
                                </button>
                                
                                <button
                                    onClick={() => {
                                        if (currentSymbol.examples && currentSymbol.examples.length > 0) {
                                            const randomExample = currentSymbol.examples[Math.floor(Math.random() * currentSymbol.examples.length)];
                                            speakExample(randomExample);
                                        }
                                    }}
                                    className="bg-white p-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 text-center border border-green-200"
                                >
                                    <div className="text-2xl mb-2">🎲</div>
                                    <div className="font-semibold text-green-700">ランダム例文</div>
                                </button>
                                
                                <button
                                    onClick={() => {
                                        const utterance = new SpeechSynthesisUtterance(currentSymbol.symbol);
                                        utterance.lang = 'en-US';
                                        utterance.rate = 0.4;
                                        speechSynthesis.speak(utterance);
                                    }}
                                    className="bg-white p-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 text-center border border-green-200"
                                >
                                    <div className="text-2xl mb-2">🎵</div>
                                    <div className="font-semibold text-green-700">記号音のみ</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                {/* Progress Bar */}
                <div className="mt-8 bg-white rounded-2xl p-6 shadow-lg">
                    <div className="flex justify-between items-center mb-3">
                        <span className="text-sm font-semibold text-gray-700">学習進度</span>
                        <span className="text-sm text-gray-500">
                            {Math.round(((currentSymbolIndex + 1) / currentData.length) * 100)}%
                        </span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-3">
                        <div 
                            className="bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-300 ease-out"
                            style={{ width: `${((currentSymbolIndex + 1) / currentData.length) * 100}%` }}
                        ></div>
                    </div>
                </div>

                {/* Bottom Navigation */}
                <div className="mt-8 bg-white rounded-2xl p-6 shadow-lg">
                    <div className="flex justify-between items-center">
                        <button
                            onClick={prevSymbolWithScroll}
                            className="flex items-center gap-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5"
                            title="前の発音記号へ"
                        >
                            <span className="text-xl">←</span>
                            <span className="font-semibold">前へ</span>
                        </button>
                        
                        <div className="text-center">
                            <div className="text-sm text-gray-500 mb-1">
                                {currentSymbolIndex + 1} / {currentData.length}
                            </div>
                            <div className="text-lg font-mono text-blue-600">
                                /{currentSymbol.symbol}/
                            </div>
                        </div>
                        
                        <button
                            onClick={nextSymbolWithScroll}
                            className="flex items-center gap-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5"
                            title="次の発音記号へ"
                        >
                            <span className="font-semibold">次へ</span>
                            <span className="text-xl">→</span>
                        </button>
                    </div>
                    
                    {/* Quick Actions */}
                    <div className="flex justify-center gap-3 mt-4">
                        <button
                            onClick={shuffleSymbolWithScroll}
                            className="bg-green-100 text-green-700 px-4 py-2 rounded-xl hover:bg-green-200 transition-all duration-200 text-sm font-semibold"
                            title="ランダムな発音記号へ"
                        >
                            🎲 ランダム
                        </button>
                        
                        <button
                            onClick={() => {
                                if (currentSymbol.examples && currentSymbol.examples.length > 0) {
                                    const randomExample = currentSymbol.examples[Math.floor(Math.random() * currentSymbol.examples.length)];
                                    speakExample(randomExample);
                                }
                            }}
                            className="bg-purple-100 text-purple-700 px-4 py-2 rounded-xl hover:bg-purple-200 transition-all duration-200 text-sm font-semibold"
                            title="ランダムな例文を再生"
                        >
                            🔊 音声
                        </button>
                    </div>
                </div>

                {/* Footer */}
                <div className="text-center mt-8 py-8">
                    <p className="text-gray-500 text-sm mb-2">
                        44個の発音記号で、自信を持って英語を話そう ✨
                    </p>
                    <p className="text-xs text-gray-400">
                        完全版発音記号マスター - 44音素
                    </p>
                </div>
            </div>
        </div>
    );
};

export default PronunciationApp;
